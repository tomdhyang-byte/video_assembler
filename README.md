# è‡ªå‹•åŒ–ç°¡å ±å½±ç‰‡åˆæˆå·¥å…· (AutoVideoMaker) V10

é€™æ˜¯ä¸€å€‹é«˜æ€§èƒ½è‡ªå‹•åŒ–å·¥å…·ï¼Œæ—¨åœ¨å°‡ **èªžéŸ³æª” (MP3)** èˆ‡ **ç°¡å ±åœ–ç‰‡ (JPG/PNG)** çµåˆæˆå°ˆæ¥­ 1080p å½±ç‰‡ã€‚æœ¬ç‰ˆæœ¬å°ˆæ³¨æ–¼ **ç©©å®šæ€§ (ä¸å†æ¶æ‹)** èˆ‡ **é«˜æ€§èƒ½ (è½‰éŒ„èˆ‡åˆæˆæé€Ÿ 5-10 å€)**ã€‚

## ðŸš€ é‡é»žæ›´æ–° (V10)

1.  **OpenAI Whisper API é›†æˆ**ï¼šè½‰éŒ„é€Ÿåº¦æå‡è‡³ç§’ç´šï¼ˆåŽŸæœ¬ local éœ€ 30min+ï¼‰ã€‚
2.  **FFmpeg å¹³è¡Œæ¸²æŸ“å¼•æ“Ž**ï¼šåˆ©ç”¨å¤šæ ¸å¿ƒ CPU åŒæ™‚ç”Ÿæˆç°¡å ±ç‰‡æ®µï¼Œåˆæˆé€Ÿåº¦æå‡ 400%ã€‚
3.  **éŸ³è¨ŠæŒ‡ç´‹èˆ‡å¹€ç²¾ç¢ºå°é½Š (Frame-Perfect Sync)**ï¼š
    *   ä½¿ç”¨ FFT Cross-Correlation æŠ€è¡“è‡ªå‹•æ ¡æº– Slide èˆ‡ç¸½éŸ³è»Œçš„å°ä½ã€‚
    *   æŽ¡ç”¨ã€Œå¹€ç´šé•·åº¦è¨ˆç®—ã€å¾¹åº•æ¶ˆé™¤å½±éŸ³ä¸åŒæ­¥ï¼ˆæ¶æ‹ï¼‰å•é¡Œã€‚
4.  **CLI éžäº¤äº’æ¨¡å¼**ï¼šæ”¯æ´æŒ‡ä»¤åƒæ•¸ï¼Œé©åˆè‡ªå‹•åŒ–æµç¨‹ã€‚
5.  **ASS å­—å¹•è½‰éŒ„**ï¼šä½¿ç”¨ SSA/ASS æ ¼å¼æä¾›æ¯” SRT æ›´ç²¾ç¢ºçš„å­—å¹•å®šä½èˆ‡æ¸²æŸ“ã€‚

## ðŸ’Ž åŠŸèƒ½ç‰¹è‰²

*   **å®Œç¾Žæ‹¼æŽ¥**ï¼šè‡ªå‹•æŽƒæä¸¦å°é½Š MP3 èˆ‡åœ–ç‰‡ï¼Œä¿è­‰è²éŸ³èˆ‡ç•«é¢è½‰æ›é»žåˆ†ç§’ä¸å·®ã€‚
*   **åœ“å½¢ Avatar**ï¼šè‡ªå‹•è£åˆ‡ HeyGen å½±ç‰‡äººé ­ä¸¦å¥—ç”¨åœ“å½¢é®ç½©èˆ‡ç¸®æ”¾å®šä½ã€‚
*   **AI æ™ºæŽ§å­—å¹•**ï¼š
    *   å¾ž Avatar åŽŸå§‹éŸ³è»Œæå–è²éŸ³ï¼ˆå”¯ä¸€äº‹å¯¦ä¾†æºï¼‰ã€‚
    *   GPT æ™ºæ…§æ–·å¥ï¼ˆè‡ªå‹•åˆ†è¡Œï¼Œæ¯è¡Œ â‰¤18 å­—ï¼‰ã€‚
    *   Force Alignment æŠ€è¡“ä¿è­‰å­—å¹•èˆ‡ç™¼éŸ³é«˜åº¦é‡åˆã€‚

## ðŸ› ï¸ ç’°å¢ƒéœ€æ±‚

*   Python 3.12
*   FFmpeg (å¿…å‚™ï¼ŒåŒ…å« ffprobe)
*   OpenAI API Key (éœ€å…·å‚™å­˜å–å­˜å–æ¬Š)
*   macOS (æŽ¨è–¦) æˆ– Linux

## ðŸ“¦ å®‰è£

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£ä¾è³´ (å·²ç²¾ç°¡ï¼Œç§»é™¤æœ¬åœ°æ¨¡åž‹ä¾è³´)
pip install numpy opencc-python-reimplemented openai python-dotenv
```

## ðŸ“– ä½¿ç”¨æµç¨‹

### Step 1ï¼šæº–å‚™ç´ æ

å°‡ç´ ææ”¾å…¥è³‡æ–™å¤¾ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
```
ç´ æè³‡æ–™å¤¾/
â”œâ”€â”€ 1.jpg               # ç°¡å ±åœ–ç‰‡ (1-N)
â”œâ”€â”€ 1.mp3               # ç‰‡æ®µèªžéŸ³ (1-N)
â”œâ”€â”€ avatar_full.mp4     # HeyGen ç”¢å‡ºçš„è§£èªªå½±ç‰‡
â””â”€â”€ full_script.txt     # æ­£ç¢ºçš„é€å­—ç¨¿
```

### Step 2ï¼šæ¥µé€Ÿç”Ÿæˆå­—å¹• (OpenAI API)

```bash
python generate_subtitles.py
# æˆ–åœ¨æç¤ºæ™‚è¼¸å…¥è·¯å¾‘
```

### Step 3ï¼šé«˜æ€§èƒ½å½±ç‰‡åˆæˆ

```bash
# æ¨¡å¼ Aï¼šäº’å‹•æ¨¡å¼
python batch_video_assembler.py

# æ¨¡å¼ Bï¼šæŒ‡ä»¤æ¨¡å¼ (CLI Mode) - æŽ¨è–¦
python batch_video_assembler.py /è·¯å¾‘/åˆ°/ç´ æ --engine ffmpeg
```

è¼¸å‡ºï¼š`~/Desktop/{è³‡æ–™å¤¾åç¨±}.mp4`

## âš™ï¸ æ ¸å¿ƒé…ç½® (`config.py`)

æ‚¨å¯ä»¥åœ¨ `config.py` ä¸­èª¿æ•´æ‰€æœ‰åƒæ•¸ï¼Œç„¡éœ€ä¿®æ”¹ä¸»ç¨‹å¼ï¼š

-   **å½±åƒå±¬æ€§**: è§£æžåº¦ (1080p), FPS (24), ç·¨ç¢¼å™¨ (libx264)
-   **å­—å¹•æ¨£å¼**: å­—é«”ã€é¡è‰² (Yellow), Y è»¸ä¸­å¿ƒé»ž (1000)
-   **Avatar å®šä½**: è£åˆ‡åº§æ¨™ã€åœ“å½¢ç¸®æ”¾æ¯”ä¾‹
-   **æ€§èƒ½è¨­å®š**: `MAX_WORKERS` å¹³è¡Œç·šç¨‹æ•¸ (é è¨­ 8)

## ðŸ—ï¸ æŠ€è¡“æž¶æ§‹

```mermaid
graph TD
    A[Avatarå½±ç‰‡] -->|æå–éŸ³è»Œ| B(OpenAI Whisper API)
    B -->|å­—ç´šæ™‚é–“æˆ³| C[Force Alignment]
    D[åŽŸå§‹è‰ç¨¿] --> C
    C -->|æ™‚é–“è»¸æ ¡æ­£| E[GPT æ™ºæ…§æ–·å¥]
    E -->|ç”Ÿæˆ| F[SRT/ASS å­—å¹•]
    G[åˆ‡ç‰‡MP3 + åœ–ç‰‡] -->|Audio Fingerprinting| H[ç²¾ç¢ºå¹€å°é½Š]
    H -->|å¹³è¡ŒFFmpeg| I[è¦–è¦ºåŸºç¤Žè»Œ]
    I -->|ç–ŠåŠ | J[Avatar è™•ç†]
    J -->|ç‡’éŒ„| F
    F -->|ç”¢å‡º| K((æœ€çµ‚å½±ç‰‡))
```
